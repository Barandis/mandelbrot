(function(){define(["jquery","./algorithm"],function(a,b){var c,d,e,f,g,h,i,j,k,l,m;return c=2.6,d=0,e=!1,f=function(c,f,g,m,n,o){var p,q,r,s,t,u,v,w,x,y;e=!1,p=l(m),q=p[0],r=p[1],s=b.palettes[m.palette],t=(q[1]-q[0])/(c.width-.5),u=(r[1]-r[0])/(c.height-.5),h(m,q,r),d++,v=function(a,d,e){var f,h,i,j,k,l,n,o;for(null==e&&(e=0),f=a,h=m.escape,i=m.depth,j=m.continuous,k=0,l=c.width;l>=k;++k)n=b.mandelbrot(f,d,h,i),o=s(n[0],n[1],n[2],i,j),g.data[e++]=o[0],g.data[e++]=o[1],g.data[e++]=o[2],g.data[e++]=255,f+=t},w=function(a,d,e){var f,h,k,l,n,o,p,q,r,v,w,x;for(null==e&&(e=0),f=a,h=m.escape,k=m.depth,l=m.supersamples,n=m.continuous,o=0,p=c.width;p>=o;++o){for(q=[0,0,0,255],r=0;l>=r;++r)v=Math.random()*t,w=Math.random()*u,x=b.mandelbrot(f-v/2,d-w/2,h,k),i(q,s(x[0],x[1],x[2],k,n));j(q,l),g.data[e++]=q[0],g.data[e++]=q[1],g.data[e++]=q[2],g.data[e++]=255,f+=t}},x=function(a,b){var d,e,f;for(d=a*c.width,e=0,f=c.width;f>=e;++e)g.data[d++]=b[0],g.data[d++]=b[1],g.data[d++]=b[2],g.data[d++]=b[3]},y=function(){var b,h,i,j,l,n,p,s,t,y;b=Date.now(),h=c.height,i=c.width,j=b,l=0,n=r[0],p=0,s=m.supersamples>1?w:v,t=d,a("#size").text(c.width+" x "+c.height),(y=function(){var r,v,w;e||t!==d||h!==c.height||i!==c.width||(s(q[0],n),n+=u,l+=c.width,f.putImageData(g,0,p),r=Date.now(),p++<c.height?r-j>=m.update?(x(0,[255,59,3,255]),f.putImageData(g,0,p),v=r-b,a("#render-time").text((v/1e3).toFixed(1)),w=1e3*l/v,"NaN"===k(w).substr(0,3)?(w=Math.floor(60*l/v),a("#render-unit").text("min")):a("#render-unit").text("s"),a("#render-speed").text(k(w)),a("#pixels").text(k(l)+"px"),j=r,setTimeout(y,0)):y():(a("#pixels").text(k(l)),o()))})()},n(),y()},g=function(a){var b,c;b=a[0]/a[1],c=window.innerWidth/window.innerHeight,c>b?a[0]*=c/b:a[1]*=b/c},h=function(b,c,d){var e,f,g,h,i,j;e=c[0],f=c[1],g=d[0],h=d[1],i=Math.abs(e-f),j=Math.abs(g-h),a("#domain span").html("d<sub>Re</sub> = "+i+" | d<sub>Im</sub> = "+j)},i=function(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3]},j=function(a,b){a[0]/=b,a[1]/=b,a[2]/=b,a[3]/=b},k=function(a,b){var c,d,e;return null==b&&(b=2),c=["","k","M","G","T","P","E"],d=Math.floor(Math.floor(Math.log(a)/Math.LN10)/3),e=(a/Math.pow(10,3*d)).toFixed(b),e+" "+c[d]},l=function(a){var b;return b=[c/a.zoom,c/a.zoom],g(b),[[a.re-b[0]/2,a.re+b[0]/2],[a.im+b[1]/2,a.im-b[1]/2]]},m=function(){e=!0},{render:f,stop:m,getRange:l}})}).call(this);