(function(){define(["jquery","./algorithm"],function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n;return c=2.6,d=2,e=0,f=!1,g=function(c,g,h,n,o,p){var q,r,s,t,u,v,w,x,y,z,A;f=!1,q=m(n),r=q[0],s=q[1],t=b.palettes[n.palette],u=b.palettes[d],v=(r[1]-r[0])/(c.width-.5),w=(s[1]-s[0])/(c.height-.5),i(n,r,s),e++,x=function(a,d,e){var f,g,i,j,k,l,m,o;for(null==e&&(e=0),f=a,g=n.escape,i=n.depth,j=n.continuous,k=0,l=c.width;l>=k;++k)m=b.mandelbrot(f,d,g,i),o=t(m[0],m[1],m[2],i,j),o||console.log({p:m,minValue:minValue,maxValue:maxValue}),h.data[e++]=o[0],h.data[e++]=o[1],h.data[e++]=o[2],h.data[e++]=255,f+=v},y=function(a,d,e){var f,g,i,l,m,o,p,q,r,s,u,x;for(null==e&&(e=0),f=a,g=n.escape,i=n.depth,l=n.supersamples,m=n.continuous,o=0,p=c.width;p>=o;++o){for(q=[0,0,0,255],r=0;l>=r;++r)s=Math.random()*v,u=Math.random()*w,x=b.mandelbrot(f-s/2,d-u/2,g,i),j(q,t(x[0],x[1],x[2],i,m));k(q,l),h.data[e++]=q[0],h.data[e++]=q[1],h.data[e++]=q[2],h.data[e++]=255,f+=v}},z=function(a,b){var d,e,f;for(d=a*c.width,e=0,f=c.width;f>=e;++e)h.data[d++]=b[0],h.data[d++]=b[1],h.data[d++]=b[2],h.data[d++]=b[3]},A=function(){var b,d,i,j,k,m,o,q,t,u;b=Date.now(),d=c.height,i=c.width,j=b,k=0,m=s[0],o=0,q=n.supersamples>1?y:x,t=e,a("#size").text(c.width+" x "+c.height),(u=function(){var s,v,x;if(t===e&&d===c.height&&i===c.width){if(f)return void p();q(r[0],m),m+=w,k+=c.width,g.putImageData(h,0,o),s=Date.now(),o++<c.height?s-j>=n.update?(z(0,[255,59,3,255]),g.putImageData(h,0,o),v=s-b,a("#render-time").text((v/1e3).toFixed(1)),x=1e3*k/v,"NaN"===l(x).substr(0,3)?(x=Math.floor(60*k/v),a("#render-unit").text("min")):a("#render-unit").text("s"),a("#render-speed").text(l(x)),a("#pixels").text(l(k)+"px"),j=s,setTimeout(u,0)):u():(a("#pixels").text(l(k)),p())}})()},o(),A()},h=function(a){var b,c;b=a[0]/a[1],c=window.innerWidth/window.innerHeight,c>b?a[0]*=c/b:a[1]*=b/c},i=function(b,c,d){var e,f,g,h,i,j;e=c[0],f=c[1],g=d[0],h=d[1],i=Math.abs(e-f),j=Math.abs(g-h),a("#domain span").html("d<sub>Re</sub> = "+i+" | d<sub>Im</sub> = "+j)},j=function(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3]},k=function(a,b){a[0]/=b,a[1]/=b,a[2]/=b,a[3]/=b},l=function(a,b){var c,d,e;return null==b&&(b=2),c=["","k","M","G","T","P","E"],d=Math.floor(Math.floor(Math.log(a)/Math.LN10)/3),e=(a/Math.pow(10,3*d)).toFixed(b),e+" "+c[d]},m=function(a){var b;return b=[c/a.zoom,c/a.zoom],h(b),[[a.re-b[0]/2,a.re+b[0]/2],[a.im+b[1]/2,a.im-b[1]/2]]},n=function(){f=!0},{render:g,stop:n,getRange:m}})}).call(this);