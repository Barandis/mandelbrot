(function(){function a(a){function b(){}return b.prototype=a,new b}var b="".split;define(["jquery","./renderer"],function(c,d){var e,f,g,h,i,j,k,l,m;return e={re:-.7,im:0,zoom:1,escape:2,supersamples:0,depth:50,autoDepth:!0,palette:1,update:100},f=c("#mandelbrot").get(0),g=a(e),j=function(){var b;c(window).resize(function(){k(),d.render(f,h,i,g)}),c(window).on("hashchange",function(){l(),d.render(f,h,i,g)}),c("#mandelbrot").click(function(a){var b,c,e,j,k,l,m;b=a.clientX,c=a.clientY,e=d.getRange(g),j=e[0],k=e[1],l=(j[1]-j[0])/f.width,m=(k[1]-k[0])/f.height,g.re=j[0]+b*l,g.im=k[0]+c*m,a.shiftKey?g.zoom/=2:a.ctrlKey||(g.zoom*=2),d.render(f,h,i,g)}),c("#control").click(function(){var a;a=c(this),c("#settings").toggle(500),c("#render").toggle(500),c("#domain").toggle(500),a.text("Hide Panels"===a.text()?"Show Panels":"Hide Panels")}),c("#draw-action").click(function(){m(),d.render(f,h,i,g)}),c("#stop-action").click(function(){d.stop()}),c("#reset-action").click(function(){g=a(e),d.render(f,h,i,g)}),c("#export-action").click(function(){var a;a="width="+f.width+",height="+f.height+",location=no",window.open(f.toDataURL("image/png"),"Mandelbrot Set Export",a)}),b=function(){c("#depth").prop("disabled",c(this).is(":checked"))},c("#auto-depth").change(b),b(),k(),l(),d.render(f,h,i,g)},k=function(){f.width=window.innerWidth,f.height=window.innerHeight,h=f.getContext("2d"),i=h.createImageData(f.width,1)},l=function(){var a,c,d,e,f,h,i;for(a=b.call(window.location.hash.substring(1),"&"),c=0,d=a.length;d>c;++c)switch(e=a[c],f=b.call(e,"="),h=f[0],i=f[1],h){case"r":g.re=parseFloat(i);break;case"i":g.im=parseFloat(i);break;case"z":g.zoom=parseFloat(i);break;case"e":g.escape=parseFloat(i);break;case"s":g.supersamples=parseInt(i);break;case"d":g.depth=parseInt(i);break;case"a":g.autoDepth="1"===i;break;case"p":g.palette=parseInt(i);break;case"u":g.update=parseInt(i)}},m=function(){var a,b,d,e,f,h,i,j,k;a=c.trim(c("#re").val()),b=c.trim(c("#im").val()),d=c.trim(c("#zoom").val()),e=c.trim(c("#escape").val()),f=parseInt(c("#supersamples").val()),h=c.trim(c("#depth").val()),i=c("#auto-depth").is(":checked"),j=parseInt(c("#palette").val()),k=c.trim(c("#update").val()),a&&(g.re=parseFloat(a)),b&&(g.im=parseFloat(b)),d&&(g.zoom=parseFloat(d)),e&&(g.escape=parseFloat(e)),g.supersamples=f,h&&(g.depth=parseInt(h)),g.autoDepth=i,g.palette=j,k&&(g.update=parseInt(k))},{init:j}})}).call(this);